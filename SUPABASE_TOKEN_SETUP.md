# üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–æ–∫–µ–Ω–∞–º–∏

## üéØ **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–±—Ä–æ—Å–∞ –ø–∞—Ä–æ–ª—è —Å —Ç–æ–∫–µ–Ω–∞–º–∏**

### **1. üìã URL Configuration –≤ Supabase:**

**–ó–∞–π–¥–∏—Ç–µ –≤ Supabase Dashboard ‚Üí Authentication ‚Üí URL Configuration**

#### **Site URL:**
```
https://lvlmart.kz
```

#### **Redirect URLs (–¥–æ–±–∞–≤—å—Ç–µ –≤—Å–µ —ç—Ç–∏ URL):**
```
https://lvlmart.kz/auth/callback
https://lvlmart.kz/reset-password
https://lvlmart.kz/auth/callback?type=recovery
```

### **2. üìß Email Templates:**

**–ó–∞–π–¥–∏—Ç–µ –≤ Authentication ‚Üí Email Templates ‚Üí Reset Password**

#### **Subject:**
```
–°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è –¥–ª—è lvlmart
```

#### **Body (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç —à–∞–±–ª–æ–Ω):**
```html
<h2>–°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è</h2>
<p>–í—ã –∑–∞–ø—Ä–æ—Å–∏–ª–∏ —Å–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è –¥–ª—è –≤–∞—à–µ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ –≤ lvlmart.</p>
<p>–ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Å—Å—ã–ª–∫—É –Ω–∏–∂–µ, —á—Ç–æ–±—ã —Å–±—Ä–æ—Å–∏—Ç—å –ø–∞—Ä–æ–ª—å:</p>
<p><a href="{{ .SiteURL }}/reset-password?access_token={{ .TokenHash }}&refresh_token={{ .RefreshToken }}&type=recovery">–°–±—Ä–æ—Å–∏—Ç—å –ø–∞—Ä–æ–ª—å</a></p>
<p>–ï—Å–ª–∏ –≤—ã –Ω–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞–ª–∏ —Å–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è, –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä—É–π—Ç–µ —ç—Ç–æ –ø–∏—Å—å–º–æ.</p>
<p>–°—Å—ã–ª–∫–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞ –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤.</p>
```

### **3. üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**

#### **–í Authentication ‚Üí Settings:**
- **Enable email confirmations**: ‚úÖ –í–∫–ª—é—á–µ–Ω–æ
- **Enable email change confirmations**: ‚úÖ –í–∫–ª—é—á–µ–Ω–æ
- **Enable phone confirmations**: ‚ùå –û—Ç–∫–ª—é—á–µ–Ω–æ (–µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ)

#### **Password Requirements:**
- **Minimum password length**: 8
- **Require uppercase**: ‚úÖ
- **Require lowercase**: ‚úÖ
- **Require numbers**: ‚úÖ

---

## üöÄ **–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

### **1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Å–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è:**
- –ó–∞–ø–æ–ª–Ω—è–µ—Ç email –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/forgot-password`
- Supabase –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç email —Å —Ç–æ–∫–µ–Ω–∞–º–∏

### **2. Email —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Å—ã–ª–∫—É —Å —Ç–æ–∫–µ–Ω–∞–º–∏:**
```
https://lvlmart.kz/reset-password?access_token=xxx&refresh_token=yyy&type=recovery
```

### **3. –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –ø–æ —Å—Å—ã–ª–∫–µ:**
- –ö–æ–¥ –∏–∑–≤–ª–µ–∫–∞–µ—Ç `access_token` –∏ `refresh_token` –∏–∑ URL
- –°–æ–∑–¥–∞–µ—Ç —Å–µ—Å—Å–∏—é —Å –ø–æ–º–æ—â—å—é `supabase.auth.setSession()`
- –†–∞–∑—Ä–µ—à–∞–µ—Ç —Å–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è

### **4. –ü–æ—Å–ª–µ —Å–±—Ä–æ—Å–∞ –ø–∞—Ä–æ–ª—è:**
- –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –≤—ã—Ö–æ–¥–∏—Ç –∏–∑ —Å–µ—Å—Å–∏–∏
- –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—Ö–æ–¥–∞

---

## üß™ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**

### **1. –ó–∞–ø—Ä–æ—Å–∏—Ç–µ —Å–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è:**
- –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ `/forgot-password`
- –í–≤–µ–¥–∏—Ç–µ email
- –ù–∞–∂–º–∏—Ç–µ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –¥–ª—è —Å–±—Ä–æ—Å–∞"

### **2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ email:**
- –û—Ç–∫—Ä–æ–π—Ç–µ –ø–∏—Å—å–º–æ –æ—Ç Supabase
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å—Å—ã–ª–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–∫–µ–Ω—ã

### **3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ:**
- –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
- –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –ª–æ–≥–∏:
  ```
  URL params: { accessToken: true, refreshToken: true, type: "recovery" }
  [SECURITY] PASSWORD_RESET_TOKEN_SESSION_CREATED: { ... }
  ```

### **4. –°–±—Ä–æ—Å—å—Ç–µ –ø–∞—Ä–æ–ª—å:**
- –í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å
- –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å
- –ù–∞–∂–º–∏—Ç–µ "–û–±–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å"

---

## üîç **–û—Ç–ª–∞–¥–∫–∞:**

### **–ï—Å–ª–∏ —Ç–æ–∫–µ–Ω—ã –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ URL –≤ Supabase
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `redirectTo` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ email template

### **–ï—Å–ª–∏ —Å–µ—Å—Å–∏—è –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ–∫–µ–Ω—ã –≤–∞–ª–∏–¥–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Supabase

### **–ï—Å–ª–∏ —Å–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–∞—Ä–æ–ª—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –æ—à–∏–±–æ–∫

---

## üìä **–õ–æ–≥–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:**

### **–£—Å–ø–µ—à–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è:**
- `PASSWORD_RESET_TOKEN_SESSION_CREATED`
- `PASSWORD_RESET_SUCCESS`

### **–û—à–∏–±–∫–∏:**
- `PASSWORD_RESET_TOKEN_ERROR`
- `PASSWORD_RESET_TOKEN_PROCESSING_ERROR`
- `PASSWORD_RESET_UPDATE_ERROR`

---

## ‚úÖ **–ß–µ–∫-–ª–∏—Å—Ç –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**

- [ ] Site URL —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ `https://lvlmart.kz`
- [ ] Redirect URLs –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- [ ] Email template –æ–±–Ω–æ–≤–ª–µ–Ω —Å —Ç–æ–∫–µ–Ω–∞–º–∏
- [ ] –¢–µ—Å—Ç–æ–≤–∞—è —Å—Å—ã–ª–∫–∞ —Å–±—Ä–æ—Å–∞ –ø–∞—Ä–æ–ª—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –¢–æ–∫–µ–Ω—ã –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –∏–∑ URL
- [ ] –°–µ—Å—Å–∏—è —Å–æ–∑–¥–∞–µ—Ç—Å—è –∏–∑ —Ç–æ–∫–µ–Ω–æ–≤
- [ ] –°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ü–æ—Å–ª–µ —Å–±—Ä–æ—Å–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤—ã—Ö–æ–¥ –∏–∑ —Å–µ—Å—Å–∏–∏

---

**üéØ –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ç–æ–∫–µ–Ω–∞–º–∏!**
